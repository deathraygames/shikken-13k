!function(){function r(){return{x:L(D.J.width/2),y:L(D.J.height)}}function a(e="U"){return[e,L(9999).toString(36),Number(new Date).toString(36)].join("-")}function s(e,n,r){e.map((e,t)=>r(n[e],e,t))}function o(){return 1+D.A.reduce((e,t)=>e+(C[D.i[t].type].P||0),0)}function u(){return D.A.reduce((e,t)=>e+(C[D.i[t].type].O||0),0)}function l(e,t,n={}){var r=e<t;if(e={key:a("R"),from:r?e:t,ia:r?t:e,...n},D.aa[e.key])throw Error("Existing building");D.aa[e.key]=e,D.ha.push(e.key)}function i(e,t=0){var n=C[e.type]["rate"];n?(t=Number.isNaN(t)?0:t,e.R=1/n*6e4+t,e.F=e.R):e.F=0}function c(e={},t=null){if(i(e={key:a("B"),type:"connector",X:!1,F:0,R:0,D:!0,h:[],refresh:!1,...r(),...e}),D.i[e.key])throw Error("Existing building");return console.log("Adding building",e),D.i[e.key]=e,D.A.push(e.key),t&&l(e.key,t),e}function n(e={},t){var n;if([n={}]=[e],e={key:a("M"),v:"idle",sa:"japan",M:100,T:.5,ya:null,Na:null,wa:null,path:[],h:[],...r(),...n},D.s[e.key])throw Error("Existing meeple");return console.log("Adding meeple",e),D.s[e.key]=e,t.push(e.key),e}function h(e={}){return!(D.m.length>=o())&&n(e,D.m)}function F(){return N.reduce((e,t)=>({...e,[t]:0}),{})}function K(){return D.m.reduce((e,t)=>(e[(t=D.s[t]).v]=(e[t.v]||0)+1,e),F())}function H(e){var t,n=C[e.type].r+4,r=0===e.R?0:1-e.F/e.R;e=document.getElementById(e.key),e=e.querySelector(".b-prod-circle"),r=r,t=2*(n=n)*Math.PI,r*=t,q(e,{r:n,"stroke-width":"10","stroke-dasharray":[r,t-r].join(" "),"stroke-dashoffset":40})}function P(e,t){var{shape:n,W:r,r:a,oa:o=0}=ve[e],n=(t=E(n,t),function(t,n,r=0){var a=[];for(let e=0;e<t;e+=1){var o=r+e/t*M,o=I().pa(o,n);a.push([o.x,o.y].map(e=>Math.round(100*e)/100))}return a}(r,a,o).map(e=>e.join(",")).join(" "));return q(t,{points:n,r:a,K:"res res-"+e,"data-res":e}),t}function T(e,n,r=10){const t=[...n.children],a=[...e];t.forEach(e=>{var t=e.dataset.Ia;!t||-1===(t=a.indexOf(t))?e.remove():a.splice(t,1)}),a.forEach(e=>{e=P(e,n);var t=I(0,0).pa(B(2*Math.PI),B(r));e.style.cx=t.x,e.style.cy=t.y,e.style.transform=A(t)})}function G(){const o=D.J.la;s(D.A,D.i,e=>{var t,n,r=C[e.type],a=document.getElementById(e.key);a&&e.refresh&&(a.remove(),a=null,e.refresh=!1),a||(t=C[e.type],a=E("g",o.ja),q(a,{id:e.key,style:"transform: "+A(e)}),n=E("circle",a),q(n,{K:"b-prod-circle b-prod-"+e.type}),H(e),n=E("circle",a),q(n,{r:t.r,K:"building b-"+e.type}),t=E("g",a),q(t,{K:"b-res-g res-g"})),a.classList.toggle("selectedb",e.key===D.u),H(e),T(e.h,a.querySelector(".res-g"),r.r)})}function z(e,t){var n=document.getElementById(e.key);n||(t=E("g",t),q(t,{id:e.key,style:"transform: "+A(e),K:"meeple-g"}),n=E("circle",t),q(n,{r:9,K:"meeple mj-"+e.v}),n=E("g",t),q(n,{K:"m-res-g res-g"}),n=t),n.querySelector(".meeple").setAttribute("class","meeple mj-"+e.v),n.style.transform=A(e),T(e.h,n.querySelector(".res-g"),9)}function J(n){N.forEach(e=>{var t=document.querySelector("#jr-"+e);n(e,t.querySelector('input[type="range"]'),t,t.querySelector(".jr-num"))})}function W(){var a,o,i;D.N&&(a=K(),o=D.m.length,i=Math.min(o,u()),J((e,t,n,r)=>{n=a[e],r.innerText=n,t.max!==(e="defe"===e?i:o)&&(t.setAttribute("max",e),t.max=e),t.value!==n&&(t.setAttribute("value",n),t.value=n)}))}function R(){(a=document.querySelector("main").classList).toggle("bselected",D.u),a.toggle("looping",D.$),a.toggle("creating",D.B),a.toggle("moving",D.fa),a.toggle("assigning",D.N),a.toggle("pop",0<D.m.length),a.toggle("intro","intro"===D.state),a.toggle("game","game"===D.state),a.toggle("flash",D.da),D.ca||(D.ca=document.getElementById("cd"));var e,t,n,r=D.H,a=Math.floor(1/60*r*.001),r=Math.floor(.001*(r-6e4*a));O(D.ca,`${D.ga?"‚òÆÔ∏è":"‚öîÔ∏è"} ${a}:`+(r<10?"0":"")+r),O("#karma",D.I?`ü™∑ Karma: ${D.I} /300`:""),document.querySelector("#kamikaze").style.display=300<=D.I?"block":"none",D.u&&(a=D.i[D.u],(r=a)&&(t=C[r.type],e=`<button ${r.D?'disabled="disabled"':' id="b-on"'}><i>üïØÔ∏è</i><b>On</b></button>
		<button ${r.D?'id="b-off"':'disabled="disabled"'}><i>üö´</i><b>Off</b></button>`,n=`<div>ü™ö Production:
			<span class="prodin ${r.X?"supplied":"missing"}">
				${t.input.length?t.input.join(", "):"(No input)"}
			</span>
			‚û°Ô∏è ${t.o.length?t.o.join(", "):"(No output)"}
			<span>(${t.rate}/min)</span>
			<span id="b-progress">%</span>
		</div>`,t=`<div>
			<div class="b-name">${t.g} ${t.name||r.type}</div>
			<div>üì¶ Resources: ${r.h.join(", ")} (${r.h.length} / max: ${t.j})</div>
			${g(r)?n:""}
			${t.P?`<div>+${t.P} max citizens</div>`:""}
			${t.O?`<div>+${t.O} max defenders</div>`:""}
		</div>
		<div>
			${e}
		</div>`,O("#binfo",t),g(r))&&(t=Math.floor(100*(0===r.R?0:1-r.F/r.R)),O("#b-progress",f(r)?t+"%":"")),a=C[a.type]["G"],a=a.length?a.map(e=>{var{name:t=e,l:n,g:r}=C[e];return`<li class="up-action ${U(n)?"affordable":"unaffordable"}" data-upgrade="${e}" data-building="${D.u}">
					<span class="up-name">${r} ${t}</span>
					<span class="up-cost">${n}</span>
				</li>`}).join(""):"No upgrades",O("#blist",D.Y?a:"")),n=`${D.m.length} / max: ${o()}, Defenders max: `+u(),O("#mcounts",n)}function d(){var r,e=D.J,t=(e.U.style.top=e.y+"px",e.U.style.left=e.x+"px",D.J.height*D.zoom);e.U.style.width=D.J.width*D.zoom+"px",e.U.style.height=t+"px",r=e.la,G(),s(D.ha,D.aa,e=>{var t,n;document.getElementById(e.key)||((t=E("line",r.ua)).id=e.key,n=D.i[e.from],e=D.i[e.ia],q(t,{x1:n.x,y1:n.y,x2:e.x,y2:e.y,K:"road"}))}),s(D.m,D.s,e=>z(e,r.ma)),s(D.C,D.s,e=>z(e,r.ma)),R()}function Y(e,t,n){D.da={title:e,text:t,Ba:n},O("#flash i",n),O("#flash h1",e),O("#flash p",t),d(),pe()}function X(e=[]){const t=function(){const t={};return s(D.A,D.i,e=>{e.h.forEach(e=>{t[e]=(t[e]||0)+1})}),t}(),n=e.reduce((e,t)=>({...e,[t]:(e[t]||0)+1}),{}),r={};return Object.keys(n).forEach(e=>{r[e]=n[e]-(t[e]||0),r[e]<0&&(r[e]=0)}),r}function U(e=[]){const n=X(e);return Object.keys(n).reduce((e,t)=>e+n[t],0)<=0}function p(t){return D.A.filter(e=>(e=D.i[e],t(e,C[e.type])))}function Z(n){let r=1/0,a=null;return s(D.A,D.i,e=>{var t=I(e).L(n);t>=r||(r=t,a=e)}),a}function V(e,t){var n=C[t.type];return I(t).L(e)<=n.r}function y(e){var t,n=Z(e);return!n||(t=C[n.type],I(n).L(e)>t.r)?null:n}function Q(e=[],n){const r="string"==typeof e?[e]:[...e];if(20<=r.length||r.includes(n))return r;var a;if(a=r[r.length-1],(e=D.ha.reduce((e,t)=>((t=D.aa[t]).from===a?e.push(t.ia):t.ia===a&&e.push(t.from),e),[])).includes(n))return r.concat(n);let o=1/0,i=null;return e=e.map(e=>{let t=[...r];return r.includes(e)||(t.push(e),(t=Q(t,n)).includes(n)&&t.length<=o&&(i=t,o=t.length)),t}),null===i?e[0]:i}function g(e){return(e=C[e.type]).input&&e.input.length||e.o&&e.o.length}function f(e){return g(e)&&e.D}function m(e,t){var n=y(e);return n&&(!t||t.key===n.key)&&(t=f(n),n=C[n.type],t)&&("prod"===e.v&&"ü™ö"===n.g||"spir"===e.v&&"ü™∑"===n.g)}function _(e){if(!e.D)return[...e.h];const r=[...C[e.type].input];return e.h.reduce((e,t)=>{var n=r.indexOf(t);return 0<n?r.splice(n,1):e.push(t),e},[])}function v(e){return e.h.length>=C[e.type].j}function ee(e,t=[]){let n=1/0,r=null;const a=I(e);return t.forEach(e=>{e=D.s[e];var t=a.L(e);t>=n||(n=t,r=e)}),{na:r,L:n}}function te(e,t){var n=t/2;e.M-=t+L(n)-L(n)}function k(e,t=[],n=!1){{if(t.length){if(n&&([n,i=[]]=[e,t],0!==n.h.reduce((e,t)=>(0<=(t=e.indexOf(t))&&e.splice(t,1),e),[...i]).length))return[...t];var[r,a=[]]=[e.h,t];if(!a.length)return[];a=[...a];for(let e=r.length;e--;e){var o=a.indexOf(r[e]);0<=o&&(a.splice(o,1),r.splice(e,1))}return a}return[]}var i}function w(e){return!!(e.path.length&&(n=(t=e).path[0],r=2,I(t).L(n)<=r))&&(e.path.shift(),!0);var t,n,r}function ne(e,t,n){var r=I(t);n&&(t=I(e),r=(r=r.qa(t)).ka(n),r=t.add(r)),e.path=[{x:r.x,y:r.y}]}function x(e,t){void 0!==(t=(t=(t="string"==typeof t?[t]:t).length?t:D.A)[L(t.length)])&&(e.path=(t=D.i[t],(e=Z(e=e))?Q([e.key],t.key).map(e=>{var t=D.i[e];return{key:e,x:t.x,y:t.y}}):[]))}function b(e,t,n,r){r*=n,n=I(e),t=I(t).qa(n).ka(r),t=n.add(t),e.x=t.x,e.y=t.y}function re(e,t){e.x+=(t*=.0225)*(2*(0|B(2))-1),e.y+=t*(2*(0|B(2))-1)}function j(e,t){return!D.C.length&&e.M<100&&(e.M=Math.min(100,e.M+.005*t),1)}function ae(e,t){w(e),e.path.length?j(e,t)||b(e,e.path[0],t,.03):x(e,D.A)}function oe(e,t){w(e),e.path.length?j(e,t)||b(e,e.path[0],t,.12):(m(e)?re:(t=p((e,t)=>f(e)&&"ü™ö"===t.g),x))(e,t)}function ie(o,e){var t,n,r,a=w(o);if(o.path.length)j(o,e)||b(o,o.path[0],e,.132*(o.h.length?.6:1));else{if(e=[],e=y(o),o.h.length){if(a&&e)return r=e,void((n=o).h.length&&V(n,r)&&(n=n.h.shift(),r.h.push(n)));0===(e=p(e=>{return t=e,n=o.h[0],!!t.D&&(r=(e,t)=>e+(t===n?1:0),a=C[t.type].input.reduce(r,0),(t=t.h.reduce(r,0))<a)&&!v(e);var t,n,r,a})).length&&(e=p((e,t)=>"üì¶"===t.g&&!v(e)&&e.D))}else{if(a&&e)return r=e,void(0<(n=o).h.length||!V(n,r)||!(a=_(r)).length||0<k(r,[t=t&&a.includes(t)?t:a[L(a.length)]],!0).length||n.h.push(t));e=p(e=>(e=_(e))&&e.length)}x(o,e)}}function se(e,t){var n;w(e),e.path.length?j(e,t)||b(e,e.path[0],t,.12):(e.T=Math.min(e.T+.01,.9),0<D.C.length?ne(e,t=D.s[(n=D.C)[L(n.length)]],90):x(e,t=p((e,t)=>"üõ°Ô∏è"===t.g)))}function ue(e,t){w(e),e.path.length?j(e,t)||b(e,e.path[0],t,.12):(m(e)?re:(t=p((e,t)=>f(e)&&"ü™∑"===t.g),x))(e,t)}function le(e,t){w(e);var n=y(e);n&&(i(n),n.h.length)&&n.h.pop(),e.path.length?b(e,e.path[0],t,.12):(t=D.m,n=D.s[t[L(t.length)]],B()<.3&&(t=ee(e,t)["na"],n=t),ne(e,n,180))}function ce(o){var e=e=>{var t;(e=D.s[e]).M<=0?(-1!==(t=D.m.indexOf(e.key))&&D.m.splice(t,1),-1!==(t=D.C.indexOf(e.key))&&D.C.splice(t,1),delete D.s[e.key],document.getElementById(e.key).remove()):(t={V:ae,Ha:oe,xa:ie,Aa:se,Ka:ue,Fa:le})[e.v]&&t[e.v](e,o)};D.m.forEach(e),D.C.forEach(e),D.A.forEach(e=>{e=D.i[e];var t,n,r,a=C[e.type];(a.o||a.input)&&e.D&&(a.input.length||(e.X=!0),e.X?(t=Math.min((r=e,D.m.reduce((e,t)=>e+(m(D.s[t],r)?1:0),0)),6),n=a.ba?1:0,e.F-=o*(t?t/t**.55:n),0<e.F||(e.F=0,[t,n=[]]=[e,a.o],(n.includes("meeple")?h({x:t.x,y:t.y}):n.includes("karma")?(n.forEach(e=>{"karma"===e&&(D.I+=1)}),1):!v(t)&&(t.h=t.h.concat([...n]),1))&&(e.X=!1,i(e,e.F)))):0<k(e,a.input,!0).length||(e.X=!0))});{const r=D.m;D.C.forEach(e=>{var{na:t,L:n}=ee(e=D.s[e],r);n<=13.5&&(B()>e.T&&te(e,20),B()>t.T)&&te(t,20)})}}function he(){if(D.$){var t=Number(new Date),e=D.Z?t-D.Z:0;if(D.Z=t,D.ga)D.H=0;else if(D.H-=e,D.H<=0){t=D.m.length;for(let e=0;e<t;e+=1)n({key:a("I"),v:"kill",sa:"mongol",M:100,T:0,x:0,...void 0},D.C);D.H=24e4}ce(e),d(),setTimeout(he,100)}}function de(){D.$=!0,D.Z=0,he()}function pe(){D.$=!1}function ye(n,r={}){const a=n.target;Object.keys(r).forEach(e=>{var t=a.closest(e);t&&r[e](n,t)}),R()}function ge(e){ye(e,{".up-action":(e,t)=>{e=t.dataset.upgrade,t=D.i[t.dataset.ja];var{G:n=[]}=C[t.type];if(!n.includes(e))throw Error("Unknown upTypeKey");!function(e,n=[]){if(U(n)){let t=[...n];return t=k(e,t),s(D.A,D.i,e=>{t=k(e,t)}),1}}(t,C[e].l)||(t.type=e,t.refresh=!0,i(t),G()),D.B=!1},"#b-on":()=>D.i[D.u].D=!0,"#b-off":()=>D.i[D.u].D=!1,"#kamikaze":()=>{D.I<300||(D.I-=300,D.H+=12e4,D.ea+=1,2<=D.ea?(D.ga=!0,Y("Kamikaze!","Another divine wind washes away the Khan's fleet! Kublai Khan decides Japan is not worth conquering. You win!","üí®üå™Ô∏èüåä")):Y("Kamikaze!","A divine wind washes away the Khan's fleet!","üí®üå™Ô∏èüåä"))}})}function fe(e){ye(e,{"#play":de,"#pause":pe,"#build":()=>D.B=!0,"#upgra":()=>{D.Y=!D.Y,D.B=!1,D.N=!1},"#cancel":()=>D.B=!1,"#restart":()=>window.location.reload(),"#jobs":()=>{D.Y=!1,D.B=!1,D.N=!D.N,W()}})}function me(r){var e=r.U;let a;var o=r.x,i=r.y;S(e,"pointerup",()=>{a=null,D.fa=!1,d()}),S(e,"pointermove",e=>{var t;a&&(t=e.clientY-a.clientY,r.x=o+(e.clientX-a.clientX),r.y=i+t,d())}),S(e,"pointerdown",e=>{var t=e.target,n=t.classList;D.state="game",n.contains("building")?(t=D.i[t.closest("g").id],D.B&&D.u&&(l(t.key,D.u),D.B=!1),D.u=t.key):D.B&&D.u?(D.B=!1,t=c({x:e.offsetX,y:e.offsetY,type:"connector"},D.u),D.u=t.key):(D.u=null,D.Y=!1,D.N=!1),e.preventDefault(),d(),D.fa=!0,a=e,o=r.x,i=r.y}),S(document.querySelector("#flash"),"pointerdown",()=>{D.da=null,d()}),document.querySelector("#bui").addEventListener("pointerdown",fe),document.querySelector("#tui").addEventListener("pointerdown",ge),J((a,o)=>{S(o,"change",()=>{var e=function(r,e){const a=K(),o={...a,[r]:e};if((e=o[r]-a[r])<=0)o.V+=-1*e;else{let n=e;if("idle"!==r&&(e=Math.min(a.V,e),n-=e,o.V-=e),!(n<=0)){const i=N.reduce((e,t)=>(t!==r&&"idle"!==t&&e.push(t),e),[]);i.forEach((e,t)=>{t=Math.min(Math.ceil(n/(i.length-t||1)),a[e]),n-=t,o[e]-=t})}}return o}(a,Number(o.value)||0);console.log("Desiring",e);{var[t={}]=[e];const n=F(),r=e=>(n[e]||0)<t[e];s(D.m,D.s,e=>{r(e.v)||(e.v=N.find(r)||"idle",e.path=[]),e=e.v,n[e]=(n[e]||0)+1}),N.forEach(()=>{}),console.log("Meeples assigned jobs:",D.s,"desired:",t,"final:",n)}W(),d()})})}const t=window.Ca?(...e)=>console.assert(...e):()=>{};class ${constructor(e=0,t=0){this.x=e,this.y=t}add(e){return t(null!=e.x),new $(this.x+e.x,this.y+e.y)}qa(e){return t(null!=e.x),new $(this.x-e.x,this.y-e.y)}multiply(e){return t(null!=e.x),new $(this.x*e.x,this.y*e.y)}scale(e){return t(null==e.x),new $(this.x*e,this.y*e)}length(){return this.ta()**.5}ta(){return this.x**2+this.y**2}L(e){return this.ra(e)**.5}ra(e){return(this.x-e.x)**2+(this.y-e.y)**2}normalize(e=1){var t=this.length();return t?this.scale(e/t):new $(0,e)}ka(e=1){var t=this.length();return e<t?this.scale(e/t):this}angle(){return Math.atan2(this.x,this.y)}pa(e=0,t=1){return this.x=t*Math.sin(e),this.y=t*Math.cos(e),this}rotate(e){var t=Math.cos(e);return e=Math.sin(e),new $(this.x*t-this.y*e,this.x*e+this.y*t)}direction(){return abs(this.x)>abs(this.y)?this.x<0?3:1:this.y<0?2:0}floor(){return new $(Math.floor(this.x),Math.floor(this.y))}toString(e=3){return`(${(this.x<0?"":" ")+this.x.toFixed(e)},${(this.y<0?"":" ")+this.y.toFixed(e)} )`}}const M=2*Math.PI,S=(e,t,n)=>e.addEventListener(t,n),E=(e,t)=>(e=document.createElementNS("http://www.w3.org/2000/svg",e),t.appendChild(e),e),q=(t,n)=>Object.keys(n).forEach(e=>t.setAttribute(e,n[e])),O=(e,t)=>(e="object"==typeof e?e:document.querySelector(e)).innerHTML!==t&&(e.innerHTML=t,!0),A=e=>`translate(${e.x}px, ${e.y}px)`,B=(e=1,t=0)=>t+(e-t)*Math.random(),L=(e=1,t=0)=>0|B(e,t),I=(e=0,t)=>null==e.x?new $(e,null==t?e:t):new $(e.x,e.y),ve={Ea:{shape:"polygon",W:3,r:6,oa:1/6*M},Ja:{shape:"polygon",W:5,r:6},Oa:{shape:"polygon",W:4,r:6,oa:.125*M},La:{shape:"polygon",W:4,r:6},Ga:{shape:"polygon",W:3,r:6}},ke=[{key:"idle",name:"Wanderer",S:"Idle",g:"üí§"},{key:"prod",name:"Farmer/Artisan",S:"Production",g:"ü™ö"},{key:"carr",name:"Carrier/Merchant",S:"Transportation",g:"üß∫"},{key:"defe",name:"Samurai/Soldier",S:"Defenders",g:"üõ°Ô∏è"},{key:"spir",name:"Monk/Pilgrim",S:"Spiritualist",g:"ü™∑"}].reduce((e,t)=>(e[t.key]=t,e),{}),N=Object.keys(ke),we={name:"",r:10,j:0,l:[],G:[],O:0,P:0,input:[],o:[],rate:0,ba:!1,g:""},C=[{key:"outpost",name:"Outpost",r:24,j:6,l:["wood","wood","stone","stone"],O:2,P:2,g:"üö©"},{key:"connector",name:"Crossroad",r:14,j:2,l:[],G:"shrine tower stockpile stoneMine farmHouse woodCutter grainFarm".split(" "),g:"ü™ß"},{key:"stockpile",name:"Stockpile",r:34,j:20,l:["stone","wood","grain"],G:["warehouse"],g:"üì¶"},{key:"warehouse",name:"Warehouse",r:46,j:40,l:["stone","stone"],g:"üì¶"},{key:"woodCutter",name:"Woodcutter",r:24,j:6,l:["grain"],input:["grain"],o:["wood"],rate:4,g:"ü™ö"},{key:"stoneMine",name:"Stone Mine",r:24,j:6,l:["wood","wood","wood","grain"],input:["grain"],o:["stone"],rate:1.5,G:["oreMine"],g:"ü™ö"},{key:"oreMine",name:"Ore Mine",r:34,j:6,l:["wood","stone","grain"],input:["wood","grain"],o:["ore"],rate:1,g:"ü™ö"},{key:"tower",name:"Watchtower",r:18,j:2,l:["stone","wood","wood"],O:5,G:["fortress"],g:"üõ°Ô∏è"},{key:"fortress",name:"Fortress",r:28,j:4,l:["stone","stone","stone","wood","ore"],O:8,g:"üõ°Ô∏è"},{key:"grainFarm",name:"Grain farm",r:24,j:10,l:["wood","wood"],input:[],o:["grain"],rate:3,G:["riceFarm"],g:"ü™ö"},{key:"riceFarm",name:"Rice farm",r:28,j:6,l:["wood","wood","ore","ore"],input:[],o:["rice"],rate:4,g:"ü™ö"},{key:"shrine",name:"Shrine",r:20,j:6,l:["wood","stone","ore"],input:["rice"],o:["karma"],rate:3,G:["temple"],g:"ü™∑"},{key:"temple",name:"Temple",r:36,j:6,l:["stone","ore","ore","rice"],input:["rice"],o:["karma","karma"],rate:4,g:"ü™∑"},{key:"farmHouse",name:"Noka (farmhouse)",r:20,j:2,l:["wood","wood","wood"],input:["grain"],o:["meeple"],rate:1,P:3,G:["urbanHouse"],ba:!0,g:"üõñ"},{key:"urbanHouse",name:"Machiya (urban house)",r:30,j:4,l:["wood","wood","ore","rice","rice"],input:["rice"],o:["meeple"],rate:1,P:8,ba:!0,g:"üõñ"}].reduce((e,t)=>(e[t.key]={...we,...t},e),{}),D=window.Da={state:"intro",J:{},i:{},A:[],s:{},m:[],C:[],aa:{},ha:[],da:{title:"xyz"},u:null,Y:!1,ca:null,ga:!1,ea:0,Z:0,I:0,H:3e5,$:!1,fa:!1,B:!1,N:!1,zoom:1,start:function(){console.log("hello shikken");var e=2*window.innerWidth,t=window.innerHeight,n=document.querySelector("#wc"),r=(q(n,{width:e,height:t}),document.querySelector("#w")),a=document.querySelector("#ws");q(a,{viewBox:`0 0 ${e} `+t}),D.J={c:n,U:r,Ma:a,width:e,height:t,za:n.getContext("2d"),la:{ua:document.querySelector("#layer-road"),ja:document.querySelector("#layer-building"),ma:document.querySelector("#layer-meeple")},x:-.5*e,y:0},O("#jass",`<div>Loyal to your H≈çj≈ç clan: <span id="mcounts"></span>
		<br><span class="altname">Build houses or towers to increase capacity.</span></div>
		<ul>${N.map(e=>{var t=ke[e];return`<li id=jr-${e}><label for="input-${e}">${t.name} <span class="altname">(${t.S})</span> ${t.g}</label><b><span class=jr-num></span></b>
		<input id="input-${e}" type=range min=0></li>`}).join("")}</ul>`),me(D.J),(r=c({type:"outpost",x:n=e/2-40,y:t/=2})).h=["wood","wood"],c({type:"connector",x:n-(100+L(e/6)),y:t+L(200)-L(200)},r.key),h(),h(),h(),d()}};window.va=e=>document.querySelector(e),document.addEventListener("DOMContentLoaded",D.start)}();